<%= nested_form_for [:admin, @product], html: {multipart: true} do |f| %>
  <div class="row">
    <div class="head-title">
      <%= @product.new_record? ? t("admin.products.new_product") : @product.name %>
    </div>
    <hr>
    <div class="errors"><%= render "shared/error_messages", object: @product %></div>
    <div class="col-md-6">
      <div>
        <%= f.label :code %>
        <%= f.text_field :code, class: "form-control",
          data: Settings.validations.code %>
      </div>
      <div>
        <%= f.label :name %>
        <%= f.text_field :name, class: "form-control",
          data: Settings.validations.blank %>
      </div>
      <div>
        <%= f.label :category_id %>
        <%= f.select :category_id, options_for_select(@categories, f.object.category_id),
          {}, {class: "form-control"} %>
      </div>
    </div>
    <div class="col-md-6">
      <div>
        <%= f.label :brand_id %>
        <%= f.select :brand_id, options_for_select(@brands, f.object.brand_id),
          {}, {class: "form-control"} %>
      </div>
      <div>
        <%= f.label :retail_sale_price, t("admin.products.form.retail_sale_price") %>
        <%= f.text_field :retail_sale_price, class: "form-control",
          data: Settings.validations.retail_sale_price %>
      </div>
      <div>
        <%= f.label :discount, t("admin.products.form.discount") %>
        <%= f.text_field :discount, class: "form-control",
          data: Settings.validations.discount %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <%= f.label :cover_image %>
      <%= image_product_table f.object.cover_image_url unless f.object.new_record? %>
      <%= f.file_field :cover_image, class: "form-control" %>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <%= f.label :discription %>
      <%= f.text_area :description, class: "ckeditor form-control" %>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="head-title">
        <%= t "admin.products.more_images" %> &nbsp;
        <%= f.link_to_add "", :images, data: {target: "#images-upload"},
          class: "fa fa-plus-square", title: t("admin.products.actions.add_image") %>
      </div>
      <div class="image-list">
        <table id="images-upload" class="table">
          <tbody>
            <%= f.fields_for :images, wrapper: false do |ff| %>
              <tr class="fields">
                <td>
                  <%= image_product_table ff.object.name_url unless ff.object.new_record? %>
                  <%= ff.file_field :name, class: "form-control" %>
                </td>
                <td><%= ff.link_to_remove "", class: "fa fa-times",
                  title: t("admin.products.actions.remove_image") %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <div class="pull-right">
        <%= link_to t("admin.actions.cancel"), admin_products_path,
          class: "btn btn-default" %>
        <%= f.submit t("admin.actions.save"), class: "btn btn-primary" %>
      </div>
    </div>
  </div>
<% end %>
